# Changelog

## v1.3.4 · 2025-10-17

### 🛠 修复

- 兼容 Tauri 2 的异步运行时时间 API，恢复剪贴板监听退避与暂停逻辑的异步睡眠实现。
- 使用 `AppHandle::emit` 适配新版事件广播接口，确保前端及时收到 `clipboard://captured` 事件。
- 修复 PNG 编码器写入方法与文件路径检测闭包签名，以恢复 Rust 模块在 Windows 上的编译通过。
- 同步前后端与文档版本号至 v1.3.4。

## v1.3.3 · 2025-10-17

### 🛠 修复

- 补充 `clipboard_watcher` 模块声明，恢复 `pnpm tauri dev` 在 Windows 上的编译通过。
- 清理 Rust 警告（移除未使用的变量与多余的 `mut`），保持构建日志干净。
- 统一 `Cargo.toml`、`tauri.conf.json`、`package.json` 与前端回退版本展示至 1.3.3。
- 文档更新 Windows 快速启动指引，验证 `pnpm i && pnpm tauri dev` 一次完成流程。

## v1.3.2 · 2025-10-17

### 🛠 修复

- 固定 `tracing-subscriber` 至 0.3.18 并移除已废弃的 `reload` 特性，恢复 `pnpm tauri dev` 编译流程。
- 前端与文档版本号同步至 v1.3.2，保持 UI 显示与发布指引一致。

## v1.3.1 · 2025-10-17

### ⚙️ 性能与稳定性

- SQLite 新增 `kind`/`pinned`/`hash` 复合索引与分页查询，后台冷启动异步预热并可一键 VACUUM。
- 剪贴板监听线程改为异步解耦 + 退避重试，支持 250~400 ms 去抖与黑名单过滤，连续复制 10+ 项不丢失。
- 历史列表保持虚拟滚动并引入分页加载按钮，图片缩略图懒加载、Diff 渲染更平滑。

### ✨ 功能补齐

- 文本 / 图像 / 文件 三种历史项均支持复制、置顶、删除、AI 右键操作，并可按类型筛选或搜索前缀。
- 设置页新增去重开关、容量上限、忽略来源、日志等级等偏好项，可即时同步至后端运行时。
- 托盘、全局快捷键、单实例守护继续沿用，关于页补充运行时版本号与反馈链接。

### 📄 文档

- README 更新至 v1.3.1，补充主界面 / 历史 / AI / 设置 / 关于最新截图与快捷键说明。
- 新增 PasteMe 对标清单链接，帮助验证 1.3.1 覆盖范围。

## v1.3.0 · 2025-10-16

### ✨ 剪贴板增强

- 新增后台轮询监听器，可在 250~400 ms 节流间隔内持续捕获文本、图像与文件三种剪贴板内容，并带时间戳落盘。
- 引入内容哈希去重与 SQLite `upsert` 逻辑，避免重复记录并兼容历史库迁移。
- 历史页增加类型筛选、搜索框、虚拟滚动与图片懒加载，连续复制 5+ 条内容依旧顺畅显示。

### 🤖 AI 与交互

- 历史项新增右键菜单：翻译 / 摘要 / 润色，可复制结果或保存回历史，未配置 API Key 时引导至设置。
- 侧栏扩展为「剪贴板 / 历史记录 / 收藏 / AI 工具 / 设置」，窗口拖拽与托盘行为保持稳定。

### 🎨 体验与文档

- 设置页改为自适应单列布局，减少留白并在窄屏保持可用。
- 应用左下角版本号自动同步 `@tauri-apps/api/app.getVersion()`（v1.3.0）。
- README 与发布指引更新至 v1.3.0，补充全新功能亮点。

## v1.2.1 (2025-10-16)

- Fix: removed deprecated set_transparent API (Tauri v2)
- Fix: clean up build warnings and ensure compatibility
- Improve: verified pnpm tauri dev/build runs successfully

## v1.2.0 · 2025-10-16

### 🛠 可用性修复

- 解决了设置 Store 在应用挂载前同步 `await` Tauri Store 调用导致的白屏问题，改为启动后异步拉取并在 3 秒超时后使用默认值渲染界面。
- 重写主界面框架，引入窗口标题栏拖拽区域、骨架屏与错误提示，确保首次打开 2 秒内可见内容且窗口可拖动。
- 统一跨进程调用的异常上报与通知桥接，防止初始化阶段因未捕获错误静默失败。
- Rust 端在 Debug 环境禁用透明窗口并自动打开 DevTools，便于排查页面渲染问题。

## v1.0.1 · 2025-10-16

### 🐞 修复

- 前端改用 Tauri v2 插件包（Dialog / FS 等）并更新窗口 API，解决依赖缺失与运行时报错。
- Tailwind 引入 `tailwindcss-animated` 官方插件配置，恢复动画类名支持。
- 修复 Rust 端 Store 读写、托盘菜单事件与数据库操作以适配 Tauri v2。

### ⚙️ 调整

- 升级版本号至 1.0.1，更新构建配置与发行文档。

## v1.0.0 · 2025-10-16

### ✨ 全面升级

- 项目更名为 **VibeClip Pro**，全新浅/深色主题与 220 px 渐变侧栏。
- 历史记录改为 SQLite 持久化，支持文本、图像（Base64）、文件路径的搜索、置顶、收藏与 JSON 导入导出。
- 新增 AI 快捷操作卡片（翻译 / 摘要 / 润色 / JSON 化 / 自定义 Prompt），兼容 OpenAI 接口并可一键写回剪贴板。

### 🧰 系统集成

- 默认全局快捷键 `Ctrl+Shift+V`，托盘菜单支持显示/隐藏、暂停监听、离线模式切换、退出。
- 设置页提供 API 配置、主题与行高调整、开机自启（插件封装）及缓存清理。
- Panel 浮窗重写，提供最近条目快速粘贴。

### ⚙️ 工程调整

- 构建体系切换至 `pnpm`，`tauri.conf.json`、脚本与文档同步更新。
- 前端使用 Vue 3 + Pinia + Naive UI 按需加载；Iconify 自动引入。
- Rust 端新增 `db.rs` / `ai_client.rs` / `clipboard.rs`，集中处理 SQLite 操作、AI 请求与状态管理。
